<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>REDCap Recode — redcap_import_recode • redcaptools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="REDCap Recode — redcap_import_recode"><meta name="description" content="This function loops through all the variables of a data set and compares them
with the field type and validation of the variables as set up in REDCap.
The REDCap data dictionary can either be directly provided or downloaded from
the REDCap project by providing an API token and matching URL.  Variables
can be converted automatically or manually to match the type and validation in
REDCap.  The script will then summarize all values that do not match the
expected format and will look for values that could potentially indicate
missing values (such as 'missing', 'excluded',...).  In a second step,
these values can be recoded automatically or manually if missing data codes
have defined in REDCap Additional Customizations (or simply set to NA).  If
a variable has been converted to a factor (e.g., radio button field), the
recoding is (additionally) prompted for all factor levels.  The function
returns a data frame with the recoded variables, writes an overview csv-table,
and the executed code to a txt-file for copy-pasting and adjusting/reusing.
 It is advised to use redcap_import_select on the data first, before
running this function."><meta property="og:description" content="This function loops through all the variables of a data set and compares them
with the field type and validation of the variables as set up in REDCap.
The REDCap data dictionary can either be directly provided or downloaded from
the REDCap project by providing an API token and matching URL.  Variables
can be converted automatically or manually to match the type and validation in
REDCap.  The script will then summarize all values that do not match the
expected format and will look for values that could potentially indicate
missing values (such as 'missing', 'excluded',...).  In a second step,
these values can be recoded automatically or manually if missing data codes
have defined in REDCap Additional Customizations (or simply set to NA).  If
a variable has been converted to a factor (e.g., radio button field), the
recoding is (additionally) prompted for all factor levels.  The function
returns a data frame with the recoded variables, writes an overview csv-table,
and the executed code to a txt-file for copy-pasting and adjusting/reusing.
 It is advised to use redcap_import_select on the data first, before
running this function."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">redcaptools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/redcaptools.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/api_endpoints.html">REDCap API endpoints</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>REDCap Recode</h1>

      <div class="d-none name"><code>redcap_import_recode.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function loops through all the variables of a data set and compares them
with the field type and validation of the variables as set up in REDCap. <br>
The REDCap data dictionary can either be directly provided or downloaded from
the REDCap project by providing an API token and matching URL. <br> Variables
can be converted automatically or manually to match the type and validation in
REDCap. <br> The script will then summarize all values that do not match the
expected format and will look for values that could potentially indicate
missing values (such as 'missing', 'excluded',...). <br> In a second step,
these values can be recoded automatically or manually if missing data codes
have defined in REDCap Additional Customizations (or simply set to NA). <br> If
a variable has been converted to a factor (e.g., radio button field), the
recoding is (additionally) prompted for all factor levels. <br> The function
returns a data frame with the recoded variables, writes an overview csv-table,
and the executed code to a txt-file for copy-pasting and adjusting/reusing.
<br> It is advised to use <code>redcap_import_select</code> on the data first, before
running this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">redcap_import_recode</span><span class="op">(</span></span>
<span>  <span class="va">selected_data</span>,</span>
<span>  dict <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  missing_codes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">rc_token</span>,</span>
<span>  <span class="va">rc_url</span>,</span>
<span>  start_var <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pot_miss <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"miss"</span>, <span class="st">"unknown"</span>, <span class="st">"excluded"</span>, <span class="st">"^0$"</span>, <span class="st">"NA"</span>, <span class="st">"N.A."</span><span class="op">)</span>,</span>
<span>  if_empty <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  cb_delims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">","</span>, <span class="st">" "</span>, <span class="st">"."</span>, <span class="st">";"</span>, <span class="st">"|"</span><span class="op">)</span>,</span>
<span>  auto_conv <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  auto_recode <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  auto_recode_precision <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  skip_intro <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  continue <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  suppress_txt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  log_code <span class="op">=</span> <span class="st">"redcap_import_recode_code.txt"</span>,</span>
<span>  log_table <span class="op">=</span> <span class="st">"redcap_import_recode_overview.csv"</span>,</span>
<span>  wait <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-selected-data">selected_data<a class="anchor" aria-label="anchor" href="#arg-selected-data"></a></dt>
<dd><p>Data to be recoded</p></dd>


<dt id="arg-dict">dict<a class="anchor" aria-label="anchor" href="#arg-dict"></a></dt>
<dd><p>Data dictionary (e.g. as downloaded from REDCap or via
<code>redcap_export_meta(rc_token, rc_url)$meta</code>). If not supplied, this
will be downloaded from the API using <code>rc_token</code> and <code>rc_token</code>.</p></dd>


<dt id="arg-missing-codes">missing_codes<a class="anchor" aria-label="anchor" href="#arg-missing-codes"></a></dt>
<dd><p>If a data dictionary is provided by the user, Missing
Data Codes as defined in REDCap Additional Customizations can be provided
here (if set up accordingly). The Missing Data Codes should be provided in a
single string with [code] [label] separated by a comma and a pipe between
the options (e.g., "-99, Missing | EXCL, Excluded | NA, not available"). If
no data dictionary is provided, the codes will be downloaded from the API
using <code>rc_token</code> and <code>rc_token</code> (if set up accordingly).</p></dd>


<dt id="arg-rc-token">rc_token<a class="anchor" aria-label="anchor" href="#arg-rc-token"></a></dt>
<dd><p>REDCap API token</p></dd>


<dt id="arg-rc-url">rc_url<a class="anchor" aria-label="anchor" href="#arg-rc-url"></a></dt>
<dd><p>Link to REDCap API</p></dd>


<dt id="arg-start-var">start_var<a class="anchor" aria-label="anchor" href="#arg-start-var"></a></dt>
<dd><p>Define in which column of the data the loop should start.
Default = 1.</p></dd>


<dt id="arg-pot-miss">pot_miss<a class="anchor" aria-label="anchor" href="#arg-pot-miss"></a></dt>
<dd><p>The provided data is inspected for potential missing values
that could be recoded. This is mainly helpful for text variables.
Expressions can simply be defined in a character vector and a text-search is
applied to search through the data. Default =
c("miss","unknown","excluded","^0$","NA","N.A."). To disable this search set
pot_miss to NULL.</p></dd>


<dt id="arg-if-empty">if_empty<a class="anchor" aria-label="anchor" href="#arg-if-empty"></a></dt>
<dd><p>Sets a default value for empty cells. This value can be
changed for each variable when using manual recoding. Default = NA (meaning
the cell remains empty).</p></dd>


<dt id="arg-cb-delims">cb_delims<a class="anchor" aria-label="anchor" href="#arg-cb-delims"></a></dt>
<dd><p>Character vector to specify the delimiter(s) to separate
values for checkbox fields in a single cell. Default = c(",","
",".",";","|")</p></dd>


<dt id="arg-auto-conv">auto_conv<a class="anchor" aria-label="anchor" href="#arg-auto-conv"></a></dt>
<dd><p>If TRUE, the variable will be auto-converted according to the
best matching field type and validation in REDCap. If FALSE, the user can
decide how the variable should be converted. If the option to continue is
active (see below), this auto-conversion can be switched on and off while
running the script. Default = TRUE.</p></dd>


<dt id="arg-auto-recode">auto_recode<a class="anchor" aria-label="anchor" href="#arg-auto-recode"></a></dt>
<dd><p>If TRUE, the values that need recoding will be auto-recoded
by matching them with codes and labels as set up in REDCap. If FALSE, the
user can decide to recode the values as suggested or to recode each value
individually. Default = FALSE.</p></dd>


<dt id="arg-auto-recode-precision">auto_recode_precision<a class="anchor" aria-label="anchor" href="#arg-auto-recode-precision"></a></dt>
<dd><p>The values that need recoding are compared with
codes and labels as set up in REDCap. With this numeric similarity index
between 0 (no similarity at all = shows basically all code/labels as
similar) and 1 (identical = shows only perfect codes/labels) the number of
suggestions can be adjusted. If auto-recoding is switched off, this index
can be adjusted while running the script. If multiple matches are found, the
value will be set to NA. Default = 0.5.</p></dd>


<dt id="arg-skip-intro">skip_intro<a class="anchor" aria-label="anchor" href="#arg-skip-intro"></a></dt>
<dd><p>If TRUE, the introduction messages will be skipped. Default
= FALSE</p></dd>


<dt id="arg-continue">continue<a class="anchor" aria-label="anchor" href="#arg-continue"></a></dt>
<dd><p>If TRUE, a question to continue will be asked before moving
along the loop. Default = TRUE.</p></dd>


<dt id="arg-suppress-txt">suppress_txt<a class="anchor" aria-label="anchor" href="#arg-suppress-txt"></a></dt>
<dd><p>If TRUE, all text output will be suppressed when used with
auto-conversion and auto-recoding. This is not recommended and should only
be used for testing. Default = FALSE.</p></dd>


<dt id="arg-log">log<a class="anchor" aria-label="anchor" href="#arg-log"></a></dt>
<dd><p>If TRUE, an overview csv-table, and a txt-file are stored in the
working directory. Default = TRUE.</p></dd>


<dt id="arg-log-code">log_code<a class="anchor" aria-label="anchor" href="#arg-log-code"></a></dt>
<dd><p>Name and location of the txt-file containing the executed
code. Default = redcap_import_recode_code.txt.</p></dd>


<dt id="arg-log-table">log_table<a class="anchor" aria-label="anchor" href="#arg-log-table"></a></dt>
<dd><p>Name and location of the csv.table containing the tabular
overview. Default = redcap_import_recode_overview.csv.</p></dd>


<dt id="arg-wait">wait<a class="anchor" aria-label="anchor" href="#arg-wait"></a></dt>
<dd><p>Allows you to set the latency time between the steps. Default =
2s.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>other parameters used for <code>redcap_import_dates</code> or
<code>redcap_import_times</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data frame with recoded data. Log-file with executed code.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># data(importdemo_data)</span></span></span>
<span class="r-in"><span><span class="co"># data(importdemo_dict)</span></span></span>
<span class="r-in"><span><span class="co"># redcap_import_recode(importdemo_data, importdemo_dict)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if using local data:</span></span></span>
<span class="r-in"><span><span class="co"># token &lt;- "xxxxx"</span></span></span>
<span class="r-in"><span><span class="co"># url &lt;- "xxxxx"</span></span></span>
<span class="r-in"><span><span class="co"># file &lt;- "data.csv"</span></span></span>
<span class="r-in"><span><span class="co"># redcap_import_recode(file, rc_token = token, rc_url = url)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alan G. Haynes, Dominik Güntensperger.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

